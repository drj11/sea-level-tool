<html>
<body>
Jasl archive.

<p id="inventory"></p>

<div class="ui-widget">
  <label for="station">Station: </label>
  <input id="station" />
</div>

<a id="fetch" class="btn btn-primary">Fetch</a>
<script src="http://coffeescript.org/extras/coffee-script.js"> </script>
<link rel="stylesheet" href="//x.scraperwiki.com/vendor/style/bootstrap.min.css">
<link rel="stylesheet" href="//x.scraperwiki.com/style/scraperwiki.css">
<script src="//x.scraperwiki.com/vendor/js/bootstrap.min.js"></script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script src="//x.scraperwiki.com/js/scraperwiki.js"></script>
<script type="text/coffeescript">
$ ->
  scraperwiki.sql.meta (meta) ->
    if meta?.table?.inventory
      $('#inventory').text "Station Inventory is available."
      scraperwiki.sql "SELECT station,jaslid from INVENTORY", (l) ->
        sl = ("#{x.jaslid} #{x.station.trim()}" for x in l)
        $('#station').autocomplete source: sl
        $('#fetch').on 'click', ->
          jaslid = $('#station').val().match(/^(\w+)/)[0]
          scraperwiki.exec "tool/code/getjasl.py #{jaslid}"

</script>
</body>
